{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Agenda de desenvolvimento Indicador de Pesagem SEMANA 01 (Aguardando) Testes com indicadores de pesagem. Atividades: (OK) Leitura de manuais; (Aguardando) Calibra\u00e7\u00e3o e compara\u00e7\u00e3o de resultados. SEMANA 02 (OK) Testes da placa de desenvolvimento microcontrolador/circuito ADC Atividades: (OK) Leitura direta do circuito ADC pelo microcontrolador com debug atrav\u00e9s da sa\u00edda serial. SEMANA 03 a 06 Integra\u00e7\u00e3o da da fun\u00e7\u00e3o de start do ADC com a calibra\u00e7\u00e3o inserida nos registradores de calibra\u00e7\u00e3o (NOVO) Implementa\u00e7\u00e3o do filtro Kalman ao processo de pesagem. Atividades: Implementa\u00e7\u00e3o da l\u00f3gica de filtro em linguagem C e Python; Integra\u00e7\u00e3o do filtro ao microcontrolador stm32 utilizado na placa de desenvolvimento; Implementa\u00e7\u00e3o de l\u00f3gica simples de debug serial. SEMANA 07 a 11 Implementa\u00e7\u00e3o do filtro do processo ao processo de pesagem 2. Atividades: Cria\u00e7\u00e3o de vari\u00e1veis de controle do filtro Kalman; Integra\u00e7\u00e3o da l\u00f3gica filtro + freeRTOS. SEMANA 12 a 15 Cria\u00e7\u00e3o/Integra\u00e7\u00e3o IHM do sistema + FreeRTOS Atividades: Cria\u00e7\u00e3o da interface IHM do sistema com integra\u00e7\u00e3o do FreeRTOS. Testes de integra\u00e7\u00e3o. SEMANA 16 a 20 Logica Modbus + integra\u00e7\u00e3o FreeRTOS Atividades: Desenvolvimento da l\u00f3gica de comunica\u00e7\u00e3o serial; BaudRates: 9600, 19200, 38400, 57600 e 115200 (verificar disponibilidade); StopBit: 8N1 e 8N2; Modbus; Integra\u00e7\u00e3o FreeRTOS. SEMANA 21 a 28 Testes de l\u00f3gica e integra\u00e7\u00e3o FreeRTOS Atividades: Testes e debug das l\u00f3gicas de filtro aplicados ao processo; Testes e debug das l\u00f3gicas de IHM; Testes e debug das l\u00f3gicas de comunica\u00e7\u00e3o serial; Testes e debug das l\u00f3gicas Modbus; Testes e debug das l\u00f3gicas FreeRTOS; OBSERVA\u00c7\u00c3O DE DESENVOLVIMENTO Os prazos estipulados acima s\u00e3o deduzidos a partir de dedica\u00e7\u00e3o exclusiva ao mesmo; A \u00faltima semana de desenvolvimento pode sofrer retra\u00e7\u00e3o em virtude das semanas anteriores de desenvolvimento necessitarem de um maior prazo.","title":"Agenda"},{"location":"#agenda-de-desenvolvimento-indicador-de-pesagem","text":"","title":"Agenda de desenvolvimento Indicador de Pesagem"},{"location":"#semana-01","text":"(Aguardando) Testes com indicadores de pesagem.","title":"SEMANA 01"},{"location":"#atividades","text":"(OK) Leitura de manuais; (Aguardando) Calibra\u00e7\u00e3o e compara\u00e7\u00e3o de resultados.","title":"Atividades:"},{"location":"#semana-02","text":"(OK) Testes da placa de desenvolvimento microcontrolador/circuito ADC","title":"SEMANA 02"},{"location":"#atividades_1","text":"(OK) Leitura direta do circuito ADC pelo microcontrolador com debug atrav\u00e9s da sa\u00edda serial.","title":"Atividades:"},{"location":"#semana-03-a-06","text":"Integra\u00e7\u00e3o da da fun\u00e7\u00e3o de start do ADC com a calibra\u00e7\u00e3o inserida nos registradores de calibra\u00e7\u00e3o (NOVO) Implementa\u00e7\u00e3o do filtro Kalman ao processo de pesagem.","title":"SEMANA 03 a 06"},{"location":"#atividades_2","text":"Implementa\u00e7\u00e3o da l\u00f3gica de filtro em linguagem C e Python; Integra\u00e7\u00e3o do filtro ao microcontrolador stm32 utilizado na placa de desenvolvimento; Implementa\u00e7\u00e3o de l\u00f3gica simples de debug serial.","title":"Atividades:"},{"location":"#semana-07-a-11","text":"Implementa\u00e7\u00e3o do filtro do processo ao processo de pesagem 2.","title":"SEMANA 07 a 11"},{"location":"#atividades_3","text":"Cria\u00e7\u00e3o de vari\u00e1veis de controle do filtro Kalman; Integra\u00e7\u00e3o da l\u00f3gica filtro + freeRTOS.","title":"Atividades:"},{"location":"#semana-12-a-15","text":"Cria\u00e7\u00e3o/Integra\u00e7\u00e3o IHM do sistema + FreeRTOS","title":"SEMANA 12 a 15"},{"location":"#atividades_4","text":"Cria\u00e7\u00e3o da interface IHM do sistema com integra\u00e7\u00e3o do FreeRTOS. Testes de integra\u00e7\u00e3o.","title":"Atividades:"},{"location":"#semana-16-a-20","text":"Logica Modbus + integra\u00e7\u00e3o FreeRTOS","title":"SEMANA 16 a 20"},{"location":"#atividades_5","text":"Desenvolvimento da l\u00f3gica de comunica\u00e7\u00e3o serial; BaudRates: 9600, 19200, 38400, 57600 e 115200 (verificar disponibilidade); StopBit: 8N1 e 8N2; Modbus; Integra\u00e7\u00e3o FreeRTOS.","title":"Atividades:"},{"location":"#semana-21-a-28","text":"Testes de l\u00f3gica e integra\u00e7\u00e3o FreeRTOS","title":"SEMANA 21 a 28"},{"location":"#atividades_6","text":"Testes e debug das l\u00f3gicas de filtro aplicados ao processo; Testes e debug das l\u00f3gicas de IHM; Testes e debug das l\u00f3gicas de comunica\u00e7\u00e3o serial; Testes e debug das l\u00f3gicas Modbus; Testes e debug das l\u00f3gicas FreeRTOS;","title":"Atividades:"},{"location":"#observacao-de-desenvolvimento","text":"Os prazos estipulados acima s\u00e3o deduzidos a partir de dedica\u00e7\u00e3o exclusiva ao mesmo; A \u00faltima semana de desenvolvimento pode sofrer retra\u00e7\u00e3o em virtude das semanas anteriores de desenvolvimento necessitarem de um maior prazo.","title":"OBSERVA\u00c7\u00c3O DE DESENVOLVIMENTO"},{"location":"observacao/","text":"OBSERVA\u00c7\u00d5ES DE DESENVOLVIMENTO Fevereiro Dias 15 a 23 Informa\u00e7\u00f5es Filtro de Pesagem: Os conceitos abaixo foram obtidos atrav\u00e9s do empirismo e teoria sobre estudos de sinais. O relat\u00f3rio abaixo n\u00e3o expressar\u00e1 dados matem\u00e1ticos a n\u00e3o ser que sejam estritamente necess\u00e1rios para a interpreta\u00e7\u00e3o nos t\u00f3picos seguintes; Conceitos obtidos atrav\u00e9s da observa\u00e7\u00e3o do indicador Matrix: O processo c\u00e9lula-indicador (Matrix) funciona da seguinte maneira: (1-A) c\u00e9lula \u00e9 alimentada com um sinal DC teoricamente de 5V. Teoricamente pela c\u00e9lula ser um composto de resistores, a aplica\u00e7\u00e3o de um sinal DC geraria um sinal DC (0 \u2013 10mV). Na pr\u00e1tica a c\u00e9lula \u00e9 alimentada com um sinal DC que varia no tempo, isso se deve ao fato de que a fonte n\u00e3o consegue manter a tens\u00e3o constante de 5V, isso foi observado em um n\u00famero alto de fontes, tanto em quantidade como em tipos, informa\u00e7\u00e3o obtida atrav\u00e9s de an\u00e1lise. Atrav\u00e9s deste comportamento caracter\u00edsticas tanto da c\u00e9lula como de par\u00e2metros do ADC s\u00e3o alterados constantemente. \u00c9 de total conhecimento que \u00e9 tecnicamente imposs\u00edvel ser cravado 5V constantes sem nenhuma varia\u00e7\u00e3o, entretanto a varia\u00e7\u00e3o apresentada, altera significativamente o comportamento do sistema. \u00c9 poss\u00edvel resolver este problema atrav\u00e9s de 3 possibilidades, a primeira alterando o projeto da fonte, para uma fonte mais estabilizada, a segunda atrav\u00e9s de um processo de filtragem do sinal via software (op\u00e7\u00e3o adotada), por fim a terceira op\u00e7\u00e3o se baseia na mescla entre uma atualiza\u00e7\u00e3o do projeto da fonte e a filtragem via software(recomendada). (1-B) Em uma situa\u00e7\u00e3o ideal de ambiente, n\u00e3o havendo interfer\u00eancias externas a \u201cestabiliza\u00e7\u00e3o\u201d total do sistema \u00e9 uma situa\u00e7\u00e3o imposs\u00edvel, o processo a ser adotado \u00e9 a atenua\u00e7\u00e3o do sinal obtido e atrav\u00e9s deste sinal ser\u00e3o utilizados processos de analise e mascaras para o valor peso/for\u00e7a exercido sobre a c\u00e9lula, gerando um valor de peso \u201cvirtual\u201d. Conceito obtidos atrav\u00e9s do estudo de sinais: Sinais obtidos atrav\u00e9s de c\u00e9lulas de carga s\u00e3o como demais sinais anal\u00f3gicos, ou seja, somat\u00f3ria de senoides; Atrav\u00e9s da an\u00e1lise do sinal lido pelo componente ADC \u00e9 poss\u00edvel aplicar um estudo dos \u201csinais\u201d lidos naquele \u201csinal\u201d entregue. Atrav\u00e9s deste estudo \u00e9 poss\u00edvel separar o sinal de ruido do sinal desejado para o processo; Como o sinal desejado \u00e9 um sinal DC vari\u00e1vel em virtude da alimenta\u00e7\u00e3o do sistema (sensor e sinal de refer\u00eancia do componente ADC) conforme descrito em 1-B, s\u00e3o necess\u00e1rios outros processos al\u00e9m do processo de filtragem do sinal chamados de \u201cm\u00e1scara\u201d; Dia 14 Solicita\u00e7\u00e3o de leitura do manual Onix EtherNet/IP para an\u00e1lise do mesmo Estudo de instabilidade do filtro; Dias 07 a 11 Ensaios de aquisi\u00e7\u00e3o de dados e filtragem; Dias 01 a 04 Ensaios de aquisi\u00e7\u00e3o de dados e filtragem; Janeiro Dia 31 Solicita\u00e7\u00e3o de documentos INMETRO para desenvolvimento; Solicita\u00e7\u00e3o de calibra\u00e7\u00e3o de multimetro; Dia 24 a 28 Testes em filtro (calibra\u00e7\u00e3o do filtro); Dados armazenados offline; Elabora\u00e7\u00e3o de script python para automatiza\u00e7\u00e3o de testes sobre filtro Solicita\u00e7\u00e3o de calibra\u00e7\u00e3o de multimetro. Dia 24 Criado nova branch corrigir_Convert para ser mesclado com a anterior assim que a corre\u00e7\u00e3o for finalizada Corre\u00e7\u00e3o da parte negativa de leitura; Continua\u00e7\u00e3o da elabora\u00e7\u00e3o da fun\u00e7\u00e3o de calibra\u00e7\u00e3o de divis\u00f5es, seguindo a l\u00f3gica para uso em sistemas de tempo real (FreeRTOS) A fun\u00e7\u00e3o necessita de um cuidado em especial pois n\u00e3o pode ser uma fun\u00e7\u00e3o com caracteristicas \"bloqueantes\" para comprometer a ciclicidade do sistema; A fun\u00e7\u00e3o visa corrigir problemas encontrados nos testes realizados anteriormente. Dia 21 Para padronizar a escala \u00e9 necess\u00e1rio efetuar a calibra\u00e7\u00e3o do processo, saber o seu pico e seu ponto de \"zero\" (que n\u00e3o ser\u00e1 zero propriamente dito), para que desta forma torne-se possivel efetuar esse procedimento; Novo brach(github) para criar a fun\u00e7\u00e3o de calibra\u00e7\u00e3o; Dias 18, 19 e 20 Por quest\u00f5es de desenvolvimento, foi optado pelo trabalho do desenvolvimento deixando em segundo plano a documenta\u00e7\u00e3o. Os dados espresso representam os dias de desenvolvimento do dia 18, 19 e 20; Alguns estudos foram feitos com o prop\u00f3sito de dar mais precis\u00e3o ao processo de leitura de dados do ADC, a precis\u00e3o de variaveis do tipo float apresentam precis\u00e3o muito baixa, optou-se a altera\u00e7\u00e3o para variaveis do tipo double que apresentam uma precis\u00e3o maior; Testes efetuados de medi\u00e7\u00e3o com pesos padr\u00f5es Teste 01: Teste 02: Teste feito de convers\u00e3o de peso Estudo com c\u00e9lula de carga: C\u00e9lulas de carga n\u00e3o apresenta um comportamento ideal conforme a reta vermelha, podendo ter seu zero deslocado a direita em \"d1\" posi\u00e7\u00f5es ou \"d2\" posi\u00e7\u00f5es, como consequencia a milivoltagem m\u00e1xima e minima torna-se alterada, consequentemente altera o valor de m\u00e1ximo e m\u00ednimo. Dia 17: Uma sa\u00edda hipot\u00e9tica para esta situa\u00e7\u00e3o seria trabalhar com um PGA de alto valor aceitando o ruido proveniente deste PGA e tratar esse problema com o uso de mascaras via software com l\u00f3gica \"E\". O N\u00famero de divis\u00f5es informado na tabela abaixo refere-se ao componente ADC e n\u00e3o ao processo (c\u00e9lula de carga). A m\u00e1scara de bits \u00e9 utilizada ap\u00f3s a rota\u00e7\u00e3o a direita em 5 posi\u00e7\u00f5es do valor recebido pelo adc. A m\u00e1scara se refere a uma vari\u00e1vel do tipo uint32_t. Foi averiguado a possivel necessidade de se trabalhar com outras faixas de ganho de PGA como forma de se amenizar problemas oriundos de ruidos. Na hip\u00f3tese de se trabalhar desta forma cada ganho PGA estaria associado a uma faixa de trabalho de abertura de n\u00famero de divis\u00f5es conforme mostrado abaixo Dia 14: Os dados obtidos n\u00e3o foram obtidos com a calibra\u00e7\u00e3o atual do equipamento mais sim com aquela adquira na empresa durante o desenvolvimento Compara\u00e7\u00e3o entre dados obtidos da leitura; Cria\u00e7\u00e3o da biblioteca de convers\u00e3o dos dados lidos para dados do tipo float Para valores negativos \u00e9 necess\u00e1rio efetuar corre\u00e7\u00e3o pois esta apresentando erros; Altera\u00e7\u00e3o de retorno de bibliotecas Altera\u00e7\u00e3o do nome de bibliotecas Dia 13: Criado biblioteca vERROR_CHECK() para tratativa de erros (In\u00edcio) Cria\u00e7\u00e3o da fun\u00e7\u00e3o de inicializa\u00e7\u00e3o do adc com compara\u00e7\u00e3o e tratativa de erro (ainda n\u00e3o implementado) Testes com a configura\u00e7\u00e3o do indicador antigo (Configura\u00e7\u00e3o de registradores); Fun\u00e7\u00e3o de leitura do adc (testado) Verifica\u00e7\u00f5es a respeito dos processos ocorridos no atual indicador de pesagem: N\u00e3o \u00e9 feito nenhuma escrita nos registradores de calibra\u00e7\u00e3o; Ao iniciar o atual indicador efetua um comando de reset; S\u00e3o configurados alguns registradores 0x00, 0x01 e 0x02 Ganho em 128 Escrita de configura\u00e7\u00e3o defaut no registrador 1 Escrita no registrador MUX com o valor1 Escrita no Registrador 0x02 do valor 0x04m ativando o registrador \"u8WriteCS1180()\" -> testado \"u8_ResetCS1180()\" -> testado Dia 12: Teste da fun\u00e7\u00e3o \"u8ReadCS1180()\". Efetuado teste sobre o ad seguido da requisi\u00e7\u00e3o de todos os registradores do ADC Cria\u00e7\u00e3o da fun\u00e7\u00e3o \"u8ReadCS1180()\" (N\u00e3o Testada) Cria\u00e7\u00e3o da fun\u00e7\u00e3o \"u8WriteCS1180()\" (N\u00e3o Testado) Cria\u00e7\u00e3o da fun\u00e7\u00e3o \"u8_ResetCS1180()\" (N\u00e3o Testado) Teste da fun\u00e7\u00e3o \"u8_TestCS1180()\" Dia 11: Inicio constru\u00e7\u00e3o biblioteca cs1180 Leitura de Byte em SPI em 16.16us e frequencia de clock em 545.45KHz Cristal externo de 16MHz(desenvolvimento) inserido no lugar do anterior, altera\u00e7\u00e3o do tem de tr\u00e1fego de 8bits em spi em +0.2us Cria\u00e7\u00e3o da leitura SPI (inicio) Cria\u00e7\u00e3o de \"semaforo\" para possivel multipla utiliza\u00e7\u00e3o do canal SPI \"software\", com retorno 0x00 para sucesso e 0x01 para falha na solicita\u00e7\u00e3o de escrita, indicando que o canal j\u00e1 estar em utiliza\u00e7\u00e3o A comunica\u00e7\u00e3o SPI foi atualizada tendo um ganho na frequencia. Motivo, cristal utilizado anteriormente (24.594MHz). Foi diagnosticado um erro com rela\u00e7\u00e3o ao cristal utilizado na placa de 24.594MHz para o de 25MHz. Para desenvolvimento ser\u00e1 utilizado cristal de 16MHz Dia 10: Inicio de testes adc; A comunica\u00e7\u00e3o serial ser\u00e1 feita via software, o teste inicial ser\u00e1 feita via polling e no futuro a biblioteca deve ser convertida para freeRTOS n\u00e3o bloqueante; Solicita\u00e7\u00e3o de insumos para teste barra de pinos f\u00eamea; Cria\u00e7\u00e3o da biblioteca de leitura SPI (Software - N\u00e3o Bloqueante) Escrita (OK) Tempo de escrita de byte: 88.875us Leitura (Pendente). Dia 07: Teste de grava\u00e7\u00e3o realizado, com adapta\u00e7\u00e3o dos pinos CN7; Inicio do projeto New Matrix (STM32 Cube IDE); Adapta\u00e7\u00e3o dos pinos CN5 (UART) debug de desenvolvimento da SEMANA2; Estudos Implementa\u00e7\u00e3o FreeRTOS. Dia 06: Organiza\u00e7\u00e3o da bancada de desenvolvimento e testes iniciais da placa de desenvolvimento; Dia 05: Organiza\u00e7\u00e3o de documenta\u00e7\u00e3o e material; Dia 04: Leitura de manuais de indicadores de terceiros; Problemas Fevereiro Dia 23 O desenvolvimento efetuado do dia 15 ao dia 23 se resumiu a compreens\u00e3o do sinal do sistema e a elabora\u00e7\u00e3o de uma nova abordagem para a filtragem do sinal lido pelo adc Dia 11 Filtro utilizado no processo de aquisi\u00e7\u00e3o de dados encontra-se com uma instabilidade na regi\u00e3o final de leitura ser\u00e1 feito um estudo deste problema, enquanto isso ser\u00e1 dado prosseguimento em outras parte do projeto Dia 08 Aguardando calibra\u00e7\u00e3o equipamento multimetro Dia 07 Aguardando posicionamento do setor de qualidade a respeito da solicita\u00e7\u00e3o de cota\u00e7\u00e3o de calibra\u00e7\u00e3o de multimetros; Documenta\u00e7\u00e3o a respeito de requisitos do INMETRO enviado \u00e9 o incorreto Janeiro Dia 21: Foi solicitado a grava\u00e7\u00e3o de dois produtos \"Detector de Pico\", os firmwares n\u00e3o foram encontrados na pasta respectiva ao seu armazenamento. Foi encaminhado uma nova c\u00f3pia juntamente com um tutorial de instala\u00e7\u00e3o Dia 17: Foi solicita\u00e7\u00e3o ao Walyson em conversa averiguar a possibilidade de calibra\u00e7\u00e3o dos multimetros true RMS da empresa como forma de se obter as calibra\u00e7\u00f5es dos demais PGA a serem testados bem como a possibilidade de um novo circuito gerador de sinal Dia 14: Dia 13: As fun\u00e7\u00f5es \"u8WriteCS1180()\" e \"u8_ResetCS1180()\" n\u00e3o apresenta gr\u00e1fico devido ao dado ter sido perdido Dia 12: Foi necess\u00e1rio efetuar altera\u00e7\u00f5es na placa com o objetivode se obter um canal de debug para o circuito adc-spi de comunica\u00e7\u00e3o, a altera\u00e7\u00e3o teve dura\u00e7\u00e3o de 2horas. A dura\u00e7\u00e3o se deu em virtude de problemas encontrados durante a altera\u00e7\u00e3o; Foi observado atrav\u00e9s do teste realizado no dia de trabalho que \u00e9 possivel atrav\u00e9s do firmware em desenvolvimento auxiliar nos processos de manuten\u00e7\u00e3o de equipamentos; Atravez da certeza que os sinais CS, SDI, SDO, CLK e READ est\u00e3o chegando no componente AD atrav\u00e9s de equipamentos como oscilosc\u00f3pio ou analisador l\u00f3gico, o microcontrolador pode enviar o comando de teste da fun\u00e7\u00e3o \"u8_TestADC()\". A fun\u00e7\u00e3o pode verificar se o componente ADC esta funcionando corretamente. (Deve-se ter a certeza que as trilas, indutores est\u00e3o em perfeito funcionamento) Dia 11: Solicita\u00e7\u00f5es de componentes apresentam um atraso na entrega o que pode impactar no tempo de desenvolvimento; Dia 06: Em conversas com Walyson, as atividades da semana 1 que compete a ele foram passadas para a proxima semana de trabalho. Para evitar a espera, as atividades da semana seguinte ser\u00e3o adiantadas evitando assim algum possivel atraso nos trabalhos. Dia 05: ausencia por 1h30minutos por motivo de sa\u00fade (3\u00aa dose vacina covid); sa\u00edda do trabalho com quatro horas de antecedencia por motivos pessoais e justificados a chefia e ao RH, com solicita\u00e7\u00e3o de reposi\u00e7\u00e3o das horas;","title":"Observa\u00e7\u00f5es"},{"location":"observacao/#observacoes-de-desenvolvimento","text":"","title":"OBSERVA\u00c7\u00d5ES DE DESENVOLVIMENTO"},{"location":"observacao/#fevereiro","text":"Dias 15 a 23 Informa\u00e7\u00f5es Filtro de Pesagem: Os conceitos abaixo foram obtidos atrav\u00e9s do empirismo e teoria sobre estudos de sinais. O relat\u00f3rio abaixo n\u00e3o expressar\u00e1 dados matem\u00e1ticos a n\u00e3o ser que sejam estritamente necess\u00e1rios para a interpreta\u00e7\u00e3o nos t\u00f3picos seguintes; Conceitos obtidos atrav\u00e9s da observa\u00e7\u00e3o do indicador Matrix: O processo c\u00e9lula-indicador (Matrix) funciona da seguinte maneira: (1-A) c\u00e9lula \u00e9 alimentada com um sinal DC teoricamente de 5V. Teoricamente pela c\u00e9lula ser um composto de resistores, a aplica\u00e7\u00e3o de um sinal DC geraria um sinal DC (0 \u2013 10mV). Na pr\u00e1tica a c\u00e9lula \u00e9 alimentada com um sinal DC que varia no tempo, isso se deve ao fato de que a fonte n\u00e3o consegue manter a tens\u00e3o constante de 5V, isso foi observado em um n\u00famero alto de fontes, tanto em quantidade como em tipos, informa\u00e7\u00e3o obtida atrav\u00e9s de an\u00e1lise. Atrav\u00e9s deste comportamento caracter\u00edsticas tanto da c\u00e9lula como de par\u00e2metros do ADC s\u00e3o alterados constantemente. \u00c9 de total conhecimento que \u00e9 tecnicamente imposs\u00edvel ser cravado 5V constantes sem nenhuma varia\u00e7\u00e3o, entretanto a varia\u00e7\u00e3o apresentada, altera significativamente o comportamento do sistema. \u00c9 poss\u00edvel resolver este problema atrav\u00e9s de 3 possibilidades, a primeira alterando o projeto da fonte, para uma fonte mais estabilizada, a segunda atrav\u00e9s de um processo de filtragem do sinal via software (op\u00e7\u00e3o adotada), por fim a terceira op\u00e7\u00e3o se baseia na mescla entre uma atualiza\u00e7\u00e3o do projeto da fonte e a filtragem via software(recomendada). (1-B) Em uma situa\u00e7\u00e3o ideal de ambiente, n\u00e3o havendo interfer\u00eancias externas a \u201cestabiliza\u00e7\u00e3o\u201d total do sistema \u00e9 uma situa\u00e7\u00e3o imposs\u00edvel, o processo a ser adotado \u00e9 a atenua\u00e7\u00e3o do sinal obtido e atrav\u00e9s deste sinal ser\u00e3o utilizados processos de analise e mascaras para o valor peso/for\u00e7a exercido sobre a c\u00e9lula, gerando um valor de peso \u201cvirtual\u201d. Conceito obtidos atrav\u00e9s do estudo de sinais: Sinais obtidos atrav\u00e9s de c\u00e9lulas de carga s\u00e3o como demais sinais anal\u00f3gicos, ou seja, somat\u00f3ria de senoides; Atrav\u00e9s da an\u00e1lise do sinal lido pelo componente ADC \u00e9 poss\u00edvel aplicar um estudo dos \u201csinais\u201d lidos naquele \u201csinal\u201d entregue. Atrav\u00e9s deste estudo \u00e9 poss\u00edvel separar o sinal de ruido do sinal desejado para o processo; Como o sinal desejado \u00e9 um sinal DC vari\u00e1vel em virtude da alimenta\u00e7\u00e3o do sistema (sensor e sinal de refer\u00eancia do componente ADC) conforme descrito em 1-B, s\u00e3o necess\u00e1rios outros processos al\u00e9m do processo de filtragem do sinal chamados de \u201cm\u00e1scara\u201d; Dia 14 Solicita\u00e7\u00e3o de leitura do manual Onix EtherNet/IP para an\u00e1lise do mesmo Estudo de instabilidade do filtro; Dias 07 a 11 Ensaios de aquisi\u00e7\u00e3o de dados e filtragem; Dias 01 a 04 Ensaios de aquisi\u00e7\u00e3o de dados e filtragem;","title":"Fevereiro"},{"location":"observacao/#janeiro","text":"Dia 31 Solicita\u00e7\u00e3o de documentos INMETRO para desenvolvimento; Solicita\u00e7\u00e3o de calibra\u00e7\u00e3o de multimetro; Dia 24 a 28 Testes em filtro (calibra\u00e7\u00e3o do filtro); Dados armazenados offline; Elabora\u00e7\u00e3o de script python para automatiza\u00e7\u00e3o de testes sobre filtro Solicita\u00e7\u00e3o de calibra\u00e7\u00e3o de multimetro. Dia 24 Criado nova branch corrigir_Convert para ser mesclado com a anterior assim que a corre\u00e7\u00e3o for finalizada Corre\u00e7\u00e3o da parte negativa de leitura; Continua\u00e7\u00e3o da elabora\u00e7\u00e3o da fun\u00e7\u00e3o de calibra\u00e7\u00e3o de divis\u00f5es, seguindo a l\u00f3gica para uso em sistemas de tempo real (FreeRTOS) A fun\u00e7\u00e3o necessita de um cuidado em especial pois n\u00e3o pode ser uma fun\u00e7\u00e3o com caracteristicas \"bloqueantes\" para comprometer a ciclicidade do sistema; A fun\u00e7\u00e3o visa corrigir problemas encontrados nos testes realizados anteriormente. Dia 21 Para padronizar a escala \u00e9 necess\u00e1rio efetuar a calibra\u00e7\u00e3o do processo, saber o seu pico e seu ponto de \"zero\" (que n\u00e3o ser\u00e1 zero propriamente dito), para que desta forma torne-se possivel efetuar esse procedimento; Novo brach(github) para criar a fun\u00e7\u00e3o de calibra\u00e7\u00e3o; Dias 18, 19 e 20 Por quest\u00f5es de desenvolvimento, foi optado pelo trabalho do desenvolvimento deixando em segundo plano a documenta\u00e7\u00e3o. Os dados espresso representam os dias de desenvolvimento do dia 18, 19 e 20; Alguns estudos foram feitos com o prop\u00f3sito de dar mais precis\u00e3o ao processo de leitura de dados do ADC, a precis\u00e3o de variaveis do tipo float apresentam precis\u00e3o muito baixa, optou-se a altera\u00e7\u00e3o para variaveis do tipo double que apresentam uma precis\u00e3o maior; Testes efetuados de medi\u00e7\u00e3o com pesos padr\u00f5es Teste 01: Teste 02: Teste feito de convers\u00e3o de peso Estudo com c\u00e9lula de carga: C\u00e9lulas de carga n\u00e3o apresenta um comportamento ideal conforme a reta vermelha, podendo ter seu zero deslocado a direita em \"d1\" posi\u00e7\u00f5es ou \"d2\" posi\u00e7\u00f5es, como consequencia a milivoltagem m\u00e1xima e minima torna-se alterada, consequentemente altera o valor de m\u00e1ximo e m\u00ednimo. Dia 17: Uma sa\u00edda hipot\u00e9tica para esta situa\u00e7\u00e3o seria trabalhar com um PGA de alto valor aceitando o ruido proveniente deste PGA e tratar esse problema com o uso de mascaras via software com l\u00f3gica \"E\". O N\u00famero de divis\u00f5es informado na tabela abaixo refere-se ao componente ADC e n\u00e3o ao processo (c\u00e9lula de carga). A m\u00e1scara de bits \u00e9 utilizada ap\u00f3s a rota\u00e7\u00e3o a direita em 5 posi\u00e7\u00f5es do valor recebido pelo adc. A m\u00e1scara se refere a uma vari\u00e1vel do tipo uint32_t. Foi averiguado a possivel necessidade de se trabalhar com outras faixas de ganho de PGA como forma de se amenizar problemas oriundos de ruidos. Na hip\u00f3tese de se trabalhar desta forma cada ganho PGA estaria associado a uma faixa de trabalho de abertura de n\u00famero de divis\u00f5es conforme mostrado abaixo Dia 14: Os dados obtidos n\u00e3o foram obtidos com a calibra\u00e7\u00e3o atual do equipamento mais sim com aquela adquira na empresa durante o desenvolvimento Compara\u00e7\u00e3o entre dados obtidos da leitura; Cria\u00e7\u00e3o da biblioteca de convers\u00e3o dos dados lidos para dados do tipo float Para valores negativos \u00e9 necess\u00e1rio efetuar corre\u00e7\u00e3o pois esta apresentando erros; Altera\u00e7\u00e3o de retorno de bibliotecas Altera\u00e7\u00e3o do nome de bibliotecas Dia 13: Criado biblioteca vERROR_CHECK() para tratativa de erros (In\u00edcio) Cria\u00e7\u00e3o da fun\u00e7\u00e3o de inicializa\u00e7\u00e3o do adc com compara\u00e7\u00e3o e tratativa de erro (ainda n\u00e3o implementado) Testes com a configura\u00e7\u00e3o do indicador antigo (Configura\u00e7\u00e3o de registradores); Fun\u00e7\u00e3o de leitura do adc (testado) Verifica\u00e7\u00f5es a respeito dos processos ocorridos no atual indicador de pesagem: N\u00e3o \u00e9 feito nenhuma escrita nos registradores de calibra\u00e7\u00e3o; Ao iniciar o atual indicador efetua um comando de reset; S\u00e3o configurados alguns registradores 0x00, 0x01 e 0x02 Ganho em 128 Escrita de configura\u00e7\u00e3o defaut no registrador 1 Escrita no registrador MUX com o valor1 Escrita no Registrador 0x02 do valor 0x04m ativando o registrador \"u8WriteCS1180()\" -> testado \"u8_ResetCS1180()\" -> testado Dia 12: Teste da fun\u00e7\u00e3o \"u8ReadCS1180()\". Efetuado teste sobre o ad seguido da requisi\u00e7\u00e3o de todos os registradores do ADC Cria\u00e7\u00e3o da fun\u00e7\u00e3o \"u8ReadCS1180()\" (N\u00e3o Testada) Cria\u00e7\u00e3o da fun\u00e7\u00e3o \"u8WriteCS1180()\" (N\u00e3o Testado) Cria\u00e7\u00e3o da fun\u00e7\u00e3o \"u8_ResetCS1180()\" (N\u00e3o Testado) Teste da fun\u00e7\u00e3o \"u8_TestCS1180()\" Dia 11: Inicio constru\u00e7\u00e3o biblioteca cs1180 Leitura de Byte em SPI em 16.16us e frequencia de clock em 545.45KHz Cristal externo de 16MHz(desenvolvimento) inserido no lugar do anterior, altera\u00e7\u00e3o do tem de tr\u00e1fego de 8bits em spi em +0.2us Cria\u00e7\u00e3o da leitura SPI (inicio) Cria\u00e7\u00e3o de \"semaforo\" para possivel multipla utiliza\u00e7\u00e3o do canal SPI \"software\", com retorno 0x00 para sucesso e 0x01 para falha na solicita\u00e7\u00e3o de escrita, indicando que o canal j\u00e1 estar em utiliza\u00e7\u00e3o A comunica\u00e7\u00e3o SPI foi atualizada tendo um ganho na frequencia. Motivo, cristal utilizado anteriormente (24.594MHz). Foi diagnosticado um erro com rela\u00e7\u00e3o ao cristal utilizado na placa de 24.594MHz para o de 25MHz. Para desenvolvimento ser\u00e1 utilizado cristal de 16MHz Dia 10: Inicio de testes adc; A comunica\u00e7\u00e3o serial ser\u00e1 feita via software, o teste inicial ser\u00e1 feita via polling e no futuro a biblioteca deve ser convertida para freeRTOS n\u00e3o bloqueante; Solicita\u00e7\u00e3o de insumos para teste barra de pinos f\u00eamea; Cria\u00e7\u00e3o da biblioteca de leitura SPI (Software - N\u00e3o Bloqueante) Escrita (OK) Tempo de escrita de byte: 88.875us Leitura (Pendente). Dia 07: Teste de grava\u00e7\u00e3o realizado, com adapta\u00e7\u00e3o dos pinos CN7; Inicio do projeto New Matrix (STM32 Cube IDE); Adapta\u00e7\u00e3o dos pinos CN5 (UART) debug de desenvolvimento da SEMANA2; Estudos Implementa\u00e7\u00e3o FreeRTOS. Dia 06: Organiza\u00e7\u00e3o da bancada de desenvolvimento e testes iniciais da placa de desenvolvimento; Dia 05: Organiza\u00e7\u00e3o de documenta\u00e7\u00e3o e material; Dia 04: Leitura de manuais de indicadores de terceiros;","title":"Janeiro"},{"location":"observacao/#problemas","text":"","title":"Problemas"},{"location":"observacao/#fevereiro_1","text":"Dia 23 O desenvolvimento efetuado do dia 15 ao dia 23 se resumiu a compreens\u00e3o do sinal do sistema e a elabora\u00e7\u00e3o de uma nova abordagem para a filtragem do sinal lido pelo adc Dia 11 Filtro utilizado no processo de aquisi\u00e7\u00e3o de dados encontra-se com uma instabilidade na regi\u00e3o final de leitura ser\u00e1 feito um estudo deste problema, enquanto isso ser\u00e1 dado prosseguimento em outras parte do projeto Dia 08 Aguardando calibra\u00e7\u00e3o equipamento multimetro Dia 07 Aguardando posicionamento do setor de qualidade a respeito da solicita\u00e7\u00e3o de cota\u00e7\u00e3o de calibra\u00e7\u00e3o de multimetros; Documenta\u00e7\u00e3o a respeito de requisitos do INMETRO enviado \u00e9 o incorreto","title":"Fevereiro"},{"location":"observacao/#janeiro_1","text":"Dia 21: Foi solicitado a grava\u00e7\u00e3o de dois produtos \"Detector de Pico\", os firmwares n\u00e3o foram encontrados na pasta respectiva ao seu armazenamento. Foi encaminhado uma nova c\u00f3pia juntamente com um tutorial de instala\u00e7\u00e3o Dia 17: Foi solicita\u00e7\u00e3o ao Walyson em conversa averiguar a possibilidade de calibra\u00e7\u00e3o dos multimetros true RMS da empresa como forma de se obter as calibra\u00e7\u00f5es dos demais PGA a serem testados bem como a possibilidade de um novo circuito gerador de sinal Dia 14: Dia 13: As fun\u00e7\u00f5es \"u8WriteCS1180()\" e \"u8_ResetCS1180()\" n\u00e3o apresenta gr\u00e1fico devido ao dado ter sido perdido Dia 12: Foi necess\u00e1rio efetuar altera\u00e7\u00f5es na placa com o objetivode se obter um canal de debug para o circuito adc-spi de comunica\u00e7\u00e3o, a altera\u00e7\u00e3o teve dura\u00e7\u00e3o de 2horas. A dura\u00e7\u00e3o se deu em virtude de problemas encontrados durante a altera\u00e7\u00e3o; Foi observado atrav\u00e9s do teste realizado no dia de trabalho que \u00e9 possivel atrav\u00e9s do firmware em desenvolvimento auxiliar nos processos de manuten\u00e7\u00e3o de equipamentos; Atravez da certeza que os sinais CS, SDI, SDO, CLK e READ est\u00e3o chegando no componente AD atrav\u00e9s de equipamentos como oscilosc\u00f3pio ou analisador l\u00f3gico, o microcontrolador pode enviar o comando de teste da fun\u00e7\u00e3o \"u8_TestADC()\". A fun\u00e7\u00e3o pode verificar se o componente ADC esta funcionando corretamente. (Deve-se ter a certeza que as trilas, indutores est\u00e3o em perfeito funcionamento) Dia 11: Solicita\u00e7\u00f5es de componentes apresentam um atraso na entrega o que pode impactar no tempo de desenvolvimento; Dia 06: Em conversas com Walyson, as atividades da semana 1 que compete a ele foram passadas para a proxima semana de trabalho. Para evitar a espera, as atividades da semana seguinte ser\u00e3o adiantadas evitando assim algum possivel atraso nos trabalhos. Dia 05: ausencia por 1h30minutos por motivo de sa\u00fade (3\u00aa dose vacina covid); sa\u00edda do trabalho com quatro horas de antecedencia por motivos pessoais e justificados a chefia e ao RH, com solicita\u00e7\u00e3o de reposi\u00e7\u00e3o das horas;","title":"Janeiro"}]}